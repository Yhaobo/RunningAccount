<!DOCTYPE html>
<html lang="zh">
<head>
    <!--设置字符编码-->
    <meta charset="utf-8">
    <title>收支明细</title>

    <link href="static/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css"/>
    <link href="static/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="static/css/table.css" rel="stylesheet" type="text/css"/>


</head>
<body>
<header id="header"></header>
<div></div>
<!--列表-->
<table id="table">
</table>

<!--    注意: 要先导入jquery的js文件, 再导入bootstrap的js文件-->
<script src="static/js/jquery-3.4.1.js"></script>
<script src="static/bootstrap/js/bootstrap.min.js"></script>
<script src="static/js/util.js"></script>
<script>
    $.get("detail/getAll", function (data) {
        if (data.flag) {
            var html = '<caption>收支明细</caption><tr>\n' +
                '            <th>日期</th>\n' +
                '            <th>摘要</th>\n' +
                '            <th>项目</th>\n' +
                '            <th>账户</th>\n' +
                '            <th>部门</th>\n' +
                '            <th>分类</th>\n' +
                '            <th>收入</th>\n' +
                '            <th>支出</th>\n' +
                '            <th>结存</th>\n' +
                '            <th>操作</th>\n' +
                '        </tr>';
            for (var i = 0; i < data.data.length; i++) {
                var detail = data.data[i];
                html += ' <tr>\n' +
                    '            <td>' + dateFormat(new Date(detail.date), "yyyy-MM-dd") + '</td>\n' +
                    '            <td>' + detail.description + '</td>\n' +
                    '            <td>' + detail.project.name + '</td>\n' +
                    '            <td>' + detail.account.name + '</td>\n' +
                    '            <td>' + detail.department.name + '</td>\n' +
                    '            <td>' + detail.category.name + '</td>\n' +
                    '            <td>' + detail.formatEarning + '</td>\n' +
                    '            <td>' + detail.formatExpense + '</td>\n' +
                    '            <td>' + detail.formatBalance + '</td>\n' +
                    '            <td><a href="detail_Item.html?id=' + detail.id + '">修改</a></td>\n' +
                    '        </tr>'

            }
            $("#table").append(html).addClass("table-hover");
        } else {
            location.href = "index.html";
        }
    });
</script>
</body>
</html>
